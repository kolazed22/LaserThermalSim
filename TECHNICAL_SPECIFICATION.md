# ТЕХНИЧЕСКОЕ ЗАДАНИЕ
## на разработку программного комплекса для моделирования и визуализации теплового нагрева материала под действием лазерного излучения

**Версия:** 1.0  
**Дата:** 10.10.2023  
**Заказчик/Исполнитель:** Студент направления "Лазерные технологии"  
**Научный руководитель:** [ФИО]

---

## 1. Резюме
Проект направлен на создание кроссплатформенного (с приоритетом Windows) десктопного приложения, предназначенного для численного моделирования нестационарного теплового поля в материале при воздействии движущегося импульсного лазерного излучения. Отличительными особенностями являются: интуитивный графический интерфейс для быстрого подбора технологических параметров, обязательный учёт температурной зависимости теплофизических и оптических свойств материалов, а также встроенная база данных материалов. Результатом работы является защищаемый дипломный проект.

## 2. Контекст и цели
*   **Бизнес-цель / Цель обучения:** Создание полнофункционального программного продукта, демонстрирующего компетенции в области программирования (C++), математического моделирования физических процессов и проектирования пользовательских интерфейсов. Получение практического инструмента для анализа режимов лазерной обработки.
*   **Проблема:** Отсутствие доступных и простых в использовании инструментов, позволяющих технологу интерактивно оценивать влияние параметров лазера (мощность, скорость, частота импульсов и т.д.) на тепловое состояние материала без глубокого погружения в численные методы и программирование.
*   **Решение:** Разработка приложения с графическим интерфейсом, которое инкапсулирует сложную математическую модель и предоставляет пользователю простые элементы управления (ползунки, поля ввода) для настройки параметров и мгновенной визуализации результатов.

## 3. Требования к функциональности

### 3.1. Минимально жизнеспособный продукт (MVP)
1.  **Управление моделированием:**
    *   Запуск, приостановка и остановка расчета.
    *   Индикатор прогресса выполнения расчета (%).
2.  **Управление параметрами лазера (Группа ввода):**
    *   Длина волны излучения (нм), выбор из предопределённого списка.
    *   Мощность (Вт).
    *   Радиус пучка (мкм).
    *   Скорость движения (мм/с).
    *   Частота следования импульсов (кГц).
    *   Длительность импульса (нс).
    *   Вид профиля пучка (Гауссов).
3.  **Управление материалом:**
    *   Выбор материала из базы данных (на MVP — Титан BT1).
    *   Отображение основных свойств выбранного материала.
4.  **Визуализация результатов:**
    *   **Основное окно:** 2D цветовая карта (тепловая карта) распределения температуры в плоскости, перпендикулярной треку, на финальном шаге моделирования.
    *   **Вспомогательный график:** График зависимости максимальной температуры в расчетной области от времени моделирования.
    *   Минимальная интерактивность: отображение значения температуры под курсором на тепловой карте.
5.  **Расчетное ядро:**
    *   Реализация явной или неявной конечно-разностной схемы для решения уравнения теплопроводности.
    *   Учет подвижного объемного источника тепла, соответствующего выбранному профилю пучка.
    *   Обязательный учет зависимости коэффициента теплопроводности и теплоемкости от температуры. Данные берутся из БД.
6.  **База данных материалов (на MVP):**
    *   Хранение данных для **одного материала (Титан BT1)**.
    *   Структура: общие константы + таблицы `conductivity(T, lambda)`, `capacity(T, lambda)`, `absorption(T, lambda)`.
    *   Функционал: выборка и линейная интерполяция свойств при заданных T и λ.

### 3.2. Дополнительные функции (по готовности MVP)
1.  Управление геометрией образца (толщина, ширина).
2.  Экспорт результатов в форматы CSV (таблицы) и PNG (изображения).
3.  Анимация распространения тепловой волны во времени.
4.  Расширение базы данных (2-3 материала).
5.  Настройка граничных условий (теплоотвод, конвекция).

## 4. Требования к данным
*   **Источники:** Научные публикации, специализированные веб-сайты (например, refractiveindex.info, материалы NIST).
*   **Структура хранения:** Встроенная реляционная база данных **SQLite**. Легко интегрируется в C++ (библиотека `sqlite3`), представляет собой единый файл, не требует отдельного сервера, поддерживает сложные запросы.
*   **Формат импорта:** На этапе наполнения БД — текстовые файлы CSV/TXT с таблицами данных. В приложении импорт не реализуется.
*   **Схема БД (упрощенная):**
    ```sql
    TABLE materials (id, name, density, melting_point, ...);
    TABLE conductivity (material_id, wavelength, temperature, value);
    TABLE capacity (...);
    TABLE absorption (...);
    ```

## 5. Технические требования и ограничения

### 5.1. Стек технологий
*   **Язык программирования:** C++17/20.
*   **GUI-библиотека:** GTK 4.x.
*   **Библиотека для работы с БД:** SQLite3.
*   **Библиотека для построения графиков:** **Matplotlib-cpp** (обертка вокруг Python `matplotlib`) или **SFML** + **ImPlot** (для интеграции с GTK потребует больше работы). **Рекомендация:** Matplotlib-cpp для быстрого получения публикационного качества графиков.
*   **Система сборки:** CMake (минимум 3.16).
*   **Система контроля версий:** Git, хостинг на GitHub.

### 5.2. Целевые платформы
*   **Основная:** Microsoft Windows 10/11 (64-bit). Цель — сборка единого исполняемого `.exe` файла или установщика.
*   **Вторичная:** Linux (Ubuntu 22.04 LTS). Сборка в контейнере или с помощью MSYS2/Mingw-w64.

### 5.3. Производительность
*   Время расчета типовой задачи (1000x1000 сетка, 1000 временных шагов) не должно превышать 5-10 минут на целевом оборудовании (AMD Ryzen 5 3500U, 8 ГБ ОЗУ).
*   Интерфейс должен оставаться отзывчивым во время расчета (вычисление в отдельном потоке).

## 6. Архитектура и модули
Приложение строится по принципу **Model-View-Controller (MVC)**.
1.  **Model (Модель):**
    *   `SimulationCore`: Класс-фасад для расчетного ядра. Управляет сеткой, временным циклом, вызывает методы расчета.
    *   `ThermalSolver`: Непосредственная реализация численного метода.
    *   `LaserSource`: Класс, описывающий источник тепла.
    *   `MaterialDatabase`: Класс-обертка для работы с SQLite, предоставляет методы `getConductivity(material_id, T, lambda)`.
2.  **View (Представление):** Окна и виджеты GTK 4.
    *   `MainWindow`: Основное окно с областями ввода, кнопками управления и областью визуализации.
    *   `PlotWidget`: Кастомный виджет для отображения графиков (на основе Cairo или интегрированного виджета от выбранной графической библиотеки).
3.  **Controller (Контроллер):** Обработчики сигналов GTK (callback-функции), которые связывают действия пользователя в View с методами Model и обновлением View.

## 7. Этапы разработки и сроки
Общий срок: **16 недель (4 месяца)**.
*   **Этап 1 (Недели 1-2): Подготовка и проектирование.**
    *   Создание репозитория, настройка CMake.
    *   Подключение и тестирование библиотек: GTK4, SQLite3, Matplotlib-cpp.
    *   Проектирование схемы БД и наполнение её данными для титана.
    *   Детальное проектирование классов Model.
*   **Этап 2 (Недели 3-6): Разработка расчетного ядра (Model).**
    *   Реализация `MaterialDatabase`.
    *   Реализация `ThermalSolver` с постоянными свойствами. Верификация на простых тестах.
    *   Интеграция температурно-зависимых свойств.
    *   Сравнение результатов с эталонным кодом научного руководителя.
*   **Этап 3 (Недели 7-10): Разработка графического интерфейса (View).**
    *   Создание `MainWindow` со всеми элементами управления.
    *   Интеграция виджета для визуализации.
    *   Реализация базового контроллера для запуска расчета.
*   **Этап 4 (Недели 11-13): Интеграция и многопоточность.**
    *   Связывание Model и View через контроллер.
    *   Вынос расчета в отдельный поток для сохранения отзывчивости GUI.
    *   Реализация индикатора прогресса.
*   **Этап 5 (Недели 14-15): Тестирование и отладка.**
    *   Функциональное тестирование.
    *   Проверка на утечки памяти.
    *   Создание финального дистрибутива для Windows (.exe).
*   **Этап 6 (Неделя 16): Документирование и подготовка к защите.**
    *   Написание финального отчета (LaTeX).
    *   Подготовка презентации.
    *   Создание скринкаста демонстрации работы.

## 8. Критерии приемки
Проект считается успешно завершенным, если:
1.  Приложение успешно собирается из исходного кода с помощью CMake на целевой платформе.
2.  Интерфейс позволяет задать все параметры из п. 3.1 и запустить расчет.
3.  Расчет завершается, и в интерфейсе отображаются тепловая карта и график температуры.
4.  Результаты расчета для идентичных входных данных совпадают с результатами эталонного кода в пределах допустимой погрешности (5%).
5.  Написан дипломный отчет, соответствующий ГОСТ.

## 9. Риски и митигирующие действия
| Риск | Вероятность | Влияние | Мера снижения |
| :--- | :--- | :--- | :--- |
| **Срыв сроков из-за сложности интеграции GTK с графической библиотекой** | Средняя | Высокое | На этапе 1 сделать **spike** (технологический эксперимент) по созданию окна с отображением тестового графика. Выбрать наиболее простой в интеграции вариант (Matplotlib-cpp). |
| **Ошибки в численном методе, приводящие к неустойчивости** | Высокая | Критическое | Поэтапная разработка ядра: сначала 1D, постоянные свойства -> верификация аналитическим решением. Потом 2D, потом подвижный источник, потом температурная зависимость. |
| **Нехватка данных о свойствах материалов** | Средняя | Высокое | На этапе MVP использовать данные только для одной длины волны. Интерполяцию по длине волны отложить на потом. Использовать аппроксимацию постоянным значением при отсутствии данных. |
| **Проблемы с кросс-платформенной сборкой под Windows** | Высокая | Среднее | С первых дней разрабатывать под Windows, используя MSYS2 или vcpkg для управления зависимостями. Linux-сборку рассматривать как опциональную. |

---

### Приложение A: Структура проекта (пример)

laser_thermal_sim/
├── CMakeLists.txt
├── README.md
├── data/ # Исходные данные для БД (скрипты конвертации)
├── database/ # Сгенерированный файл БД (materials.db)
├── docs/ # Документация
├── include/
│ ├── core/ # Классы модели (SimulationCore, ThermalSolver...)
│ ├── data/ # Класс MaterialDatabase
│ └── gui/ # Заголовки виджетов
├── src/
│ ├── core/ # Реализация модели
│ ├── data/ # Реализация работы с БД
│ └── gui/ # Реализация интерфейса (MainWindow.cpp, ...)
└── tests/ # Модульные и интеграционные тесты

### Приложение B: Ссылки и ресурсы
*   **GTK 4 Documentation:** [https://docs.gtk.org/gtk4/](https://docs.gtk.org/gtk4/)
*   **SQLite C/C++ Interface:** [https://www.sqlite.org/capi3ref.html](https://www.sqlite.org/capi3ref.html)
*   **Matplotlib-cpp:** [https://github.com/lava/matplotlib-cpp](https://github.com/lava/matplotlib-cpp)
*   **CMake Tutorial:** [https://cmake.org/cmake/help/latest/guide/tutorial/](https://cmake.org/cmake/help/latest/guide/tutorial/)
*   **Шаблон отчета LaTeX (ГОСТ):** Найти на кафедре или использовать Overleaf Template.

---

**ТЗ согласовано и утверждено к исполнению.**